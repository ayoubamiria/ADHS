{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{useLocation}from\"react-router-dom\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ClusterDashVir=()=>{const location=useLocation();const[clusterAttempts,setClusterAttempts]=useState([]);const[selectedClusterIndex,setSelectedClusterIndex]=useState(null);useEffect(()=>{// Récupérer les essais depuis localStorage\nconst savedAttempts=JSON.parse(localStorage.getItem(\"clusterAttempts\"))||[];// Vérifier si l'essai actuel (location.state) existe déjà dans savedAttempts\nif(location.state&&!savedAttempts.some(attempt=>attempt.cluster_name===location.state.cluster_name)){savedAttempts.push(location.state);}// Mettre à jour l'état avec les essais mis à jour\nsetClusterAttempts(savedAttempts);},[location.state]);const handleRowClick=index=>{setSelectedClusterIndex(selectedClusterIndex===index?null:index);};return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen p-4 bg-gradient-to-b from-teal-100 to-white\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-4xl font-bold text-teal-600 mb-6\",children:\"Cluster Dashboard\"}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full bg-white border border-gray-300\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-teal-500 text-white\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"py-2 px-4 border\",children:\"Nodes\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-2 px-4 border\",children:\"Cluster Name\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-2 px-4 border\",children:\"Cluster Description\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-2 px-4 border\",children:\"Cluster IP\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-2 px-4 border\",children:\"Gateway IP\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-2 px-4 border\",children:\"Node Count\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-2 px-4 border\",children:\"Cluster Type\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:clusterAttempts.map((attempt,index)=>{var _attempt$clusterType;return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsxs(\"tr\",{className:`hover:bg-gray-100 cursor-pointer ${selectedClusterIndex===index?\"bg-teal-200\":\"\"}`,onClick:()=>handleRowClick(index),children:[/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-4 border\",children:/*#__PURE__*/_jsx(\"select\",{className:\"border rounded p-1\"})}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-4 border\",children:attempt.cluster_name}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-4 border\",children:attempt.clusterDescription}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-4 border\",children:attempt.clusterIp}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-4 border\",children:attempt.gateway}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-4 border\",children:attempt.nodeCount}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-4 border\",children:(_attempt$clusterType=attempt.clusterType)!==null&&_attempt$clusterType!==void 0&&_attempt$clusterType.Ha?\"High Availability (HA)\":\"Classic\"})]}),selectedClusterIndex===index&&/*#__PURE__*/_jsx(\"tr\",{className:\"bg-gray-200\",children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"7\",className:\"py-2 px-4 border\",children:/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 p-4\",children:attempt.nodeDetails.map((node,nodeIndex)=>{var _attempt$clusterType2;return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white border border-gray-300 rounded-lg shadow-md p-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-lg font-semibold text-teal-600\",children:node.hostname}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Description :\"}),\" \",node.nodeDescription]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"RAM :\"}),\" \",node.ram,\" GB\"]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"CPU :\"}),\" \",node.cpu,\" vCPUs\"]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"OS :\"}),\" \",node.osVersion]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:/*#__PURE__*/_jsx(\"strong\",{children:\"R\\xF4les :\"})}),/*#__PURE__*/_jsxs(\"ul\",{className:\"list-disc list-inside\",children:[node.isNameNode&&/*#__PURE__*/_jsx(\"li\",{children:\"Name Node\"}),node.isResourceManager&&/*#__PURE__*/_jsx(\"li\",{children:\"Resource Manager\"}),node.isDataNode&&/*#__PURE__*/_jsx(\"li\",{children:\"Data Node\"})]})]}),((_attempt$clusterType2=attempt.clusterType)===null||_attempt$clusterType2===void 0?void 0:_attempt$clusterType2.Ha)&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:/*#__PURE__*/_jsx(\"strong\",{children:\"Composants HA :\"})}),/*#__PURE__*/_jsxs(\"ul\",{className:\"list-disc list-inside\",children:[node.isZookeeper&&/*#__PURE__*/_jsx(\"li\",{children:\"Zookeeper\"}),node.isNameNodeStandby&&/*#__PURE__*/_jsx(\"li\",{children:\"Namenode Standby\"}),node.isResourceManagerStandby&&/*#__PURE__*/_jsx(\"li\",{children:\"Resource Manager Standby\"})]})]})]},nodeIndex);})})})})]},index);})})]})})]});};export default ClusterDashVir;","map":{"version":3,"names":["React","useState","useEffect","useLocation","jsx","_jsx","jsxs","_jsxs","ClusterDashVir","location","clusterAttempts","setClusterAttempts","selectedClusterIndex","setSelectedClusterIndex","savedAttempts","JSON","parse","localStorage","getItem","state","some","attempt","cluster_name","push","handleRowClick","index","className","children","map","_attempt$clusterType","Fragment","onClick","clusterDescription","clusterIp","gateway","nodeCount","clusterType","Ha","colSpan","nodeDetails","node","nodeIndex","_attempt$clusterType2","hostname","nodeDescription","ram","cpu","osVersion","isNameNode","isResourceManager","isDataNode","isZookeeper","isNameNodeStandby","isResourceManagerStandby"],"sources":["C:/Users/User/pfe2/ClusterForm/src/ClusterDashVir.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useLocation } from \"react-router-dom\";\n\nconst ClusterDashVir = () => {\n  const location = useLocation();\n  const [clusterAttempts, setClusterAttempts] = useState([]);\n  const [selectedClusterIndex, setSelectedClusterIndex] = useState(null);\n\n  useEffect(() => {\n    // Récupérer les essais depuis localStorage\n    const savedAttempts = JSON.parse(localStorage.getItem(\"clusterAttempts\")) || [];\n\n    // Vérifier si l'essai actuel (location.state) existe déjà dans savedAttempts\n    if (location.state && !savedAttempts.some(attempt => attempt.cluster_name === location.state.cluster_name)) {\n      savedAttempts.push(location.state);\n    }\n\n    // Mettre à jour l'état avec les essais mis à jour\n    setClusterAttempts(savedAttempts);\n  }, [location.state]);\n\n  const handleRowClick = (index) => {\n    setSelectedClusterIndex(selectedClusterIndex === index ? null : index);\n  };\n\n  return (\n    <div className=\"min-h-screen p-4 bg-gradient-to-b from-teal-100 to-white\">\n      <h1 className=\"text-4xl font-bold text-teal-600 mb-6\">Cluster Dashboard</h1>\n      <div className=\"overflow-x-auto\">\n        <table className=\"min-w-full bg-white border border-gray-300\">\n          <thead>\n            <tr className=\"bg-teal-500 text-white\">\n              <th className=\"py-2 px-4 border\">Nodes</th>\n              <th className=\"py-2 px-4 border\">Cluster Name</th>\n              <th className=\"py-2 px-4 border\">Cluster Description</th>\n              <th className=\"py-2 px-4 border\">Cluster IP</th>\n              <th className=\"py-2 px-4 border\">Gateway IP</th>\n              <th className=\"py-2 px-4 border\">Node Count</th>\n              <th className=\"py-2 px-4 border\">Cluster Type</th>\n            </tr>\n          </thead>\n          <tbody>\n            {clusterAttempts.map((attempt, index) => (\n              <React.Fragment key={index}>\n                <tr\n                  className={`hover:bg-gray-100 cursor-pointer ${\n                    selectedClusterIndex === index ? \"bg-teal-200\" : \"\"\n                  }`}\n                  onClick={() => handleRowClick(index)}\n                >\n                  <td className=\"py-2 px-4 border\">\n                    <select className=\"border rounded p-1\">\n                      {/* Options here */}\n                    </select>\n                  </td>\n                  <td className=\"py-2 px-4 border\">{attempt.cluster_name}</td>\n                  <td className=\"py-2 px-4 border\">{attempt.clusterDescription}</td>\n                  <td className=\"py-2 px-4 border\">{attempt.clusterIp}</td>\n                  <td className=\"py-2 px-4 border\">{attempt.gateway}</td>\n                  <td className=\"py-2 px-4 border\">{attempt.nodeCount}</td>\n                  <td className=\"py-2 px-4 border\">\n                    {attempt.clusterType?.Ha ? \"High Availability (HA)\" : \"Classic\"}\n                  </td>\n                </tr>\n                {selectedClusterIndex === index && (\n                  <tr className=\"bg-gray-200\">\n                    <td colSpan=\"7\" className=\"py-2 px-4 border\">\n                      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 p-4\">\n                        {attempt.nodeDetails.map((node, nodeIndex) => (\n                          <div\n                            key={nodeIndex}\n                            className=\"bg-white border border-gray-300 rounded-lg shadow-md p-4\"\n                          >\n                            <p className=\"text-lg font-semibold text-teal-600\">\n                              {node.hostname}\n                            </p>\n                            <p className=\"text-sm text-gray-600\">\n                              <strong>Description :</strong> {node.nodeDescription}\n                            </p>\n                            <p className=\"text-sm text-gray-600\">\n                              <strong>RAM :</strong> {node.ram} GB\n                            </p>\n                            <p className=\"text-sm text-gray-600\">\n                              <strong>CPU :</strong> {node.cpu} vCPUs\n                            </p>\n                            <p className=\"text-sm text-gray-600\">\n                              <strong>OS :</strong> {node.osVersion}\n                            </p>\n                            <div className=\"mb-4\">\n                              <p className=\"text-sm text-gray-600\">\n                                <strong>Rôles :</strong>\n                              </p>\n                              <ul className=\"list-disc list-inside\">\n                                {node.isNameNode && <li>Name Node</li>}\n                                {node.isResourceManager && <li>Resource Manager</li>}\n                                {node.isDataNode && <li>Data Node</li>}\n                              </ul>\n                            </div>\n                            {attempt.clusterType?.Ha && (\n                              <div className=\"mb-4\">\n                                <p className=\"text-sm text-gray-600\">\n                                  <strong>Composants HA :</strong>\n                                </p>\n                                <ul className=\"list-disc list-inside\">\n                                  {node.isZookeeper && <li>Zookeeper</li>}\n                                  {node.isNameNodeStandby && <li>Namenode Standby</li>}\n                                  {node.isResourceManagerStandby && (\n                                    <li>Resource Manager Standby</li>\n                                  )}\n                                </ul>\n                              </div>\n                            )}\n                          </div>\n                        ))}\n                      </div>\n                    </td>\n                  </tr>\n                )}\n              </React.Fragment>\n            ))}\n          </tbody>\n        </table>\n      </div>\n    </div>\n  );\n};\n\nexport default ClusterDashVir;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}